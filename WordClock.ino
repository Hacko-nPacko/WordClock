#include "LPD8806.h"
#include "SPI.h"
#include "Process.h"
#include <avr/pgmspace.h>


const uint8_t boards[144][18] PROGMEM = {
  /*  1:00 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B10000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  1:05 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B10000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B01110000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  1:10 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B10000001, B00111110, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  1:15 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B10000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000011, B11111110 },
  /*  1:20 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B10000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11000000, B00000000 },
  /*  1:25 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B10000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11100011, B10000000 },
  /*  1:30 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B10000001, B00000000, B00000000, B00000000, B00000000, B00000011, B11111100, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  1:35 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B10000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B11110000, B00000000, B00100011, B10000000 },
  /*  1:40 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B10000001, B00000000, B00000000, B00000000, B01111111, B11000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  1:45 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00001110, B00000000, B00000011, B11111110 },
  /*  1:50 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B10000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00000000, B00000000 },
  /*  1:55 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B10000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00100011, B10000000 },
  /*  2:00 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  2:05 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B00000001, B00000000, B00000000, B00000000, B01110000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  2:10 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B00000001, B00000000, B00000000, B00000000, B00001111, B10000000, B00000000, B00000000, B00000000, B00000000 },
  /*  2:15 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000011, B11111110 },
  /*  2:20 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11000000, B00000000 },
  /*  2:25 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11100011, B10000000 },
  /*  2:30 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B00000001, B00000000, B00000011, B11111100, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  2:35 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B00000001, B00000000, B00000000, B00000000, B00000000, B00000111, B11110000, B00000000, B00100011, B10000000 },
  /*  2:40 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B00000001, B01111111, B11000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  2:45 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000111, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00001110, B00000000, B00000011, B11111110 },
  /*  2:50 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B00000001, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00000000, B00000000 },
  /*  2:55 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B00000001, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00100011, B10000000 },
  /*  3:00 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000111, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  3:05 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000111, B00000000, B00001000, B00000000, B00000000, B00000000, B00000000, B01110000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  3:10 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000111, B00000000, B00001000, B00000000, B00000000, B00000000, B00000000, B00001111, B10000000, B00000000, B00000000, B00000000, B00000000 },
  /*  3:15 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000111, B00000000, B00001000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000011, B11111110 },
  /*  3:20 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000111, B00000000, B00001000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11000000, B00000000 },
  /*  3:25 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000111, B00000000, B00001000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11100011, B10000000 },
  /*  3:30 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000111, B00000000, B00001000, B00000000, B00000000, B00000011, B11111100, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  3:35 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000111, B00000000, B00001000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B11110000, B00000000, B00100011, B10000000 },
  /*  3:40 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000111, B00000000, B00001000, B00000000, B01111111, B11000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  3:45 */ {B00001111, B10100000, B01111110, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00001110, B00000000, B00000011, B11111110 },
  /*  3:50 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000111, B00000000, B00001000, B00000000, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00000000, B00000000 },
  /*  3:55 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000111, B00000000, B00001000, B00000000, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00100011, B10000000 },
  /*  4:00 */ {B00001111, B10100000, B01111110, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  4:05 */ {B00001111, B10100000, B01111110, B00000000, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B01110000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  4:10 */ {B00001111, B10100000, B01111110, B00000000, B00000001, B00000000, B00111110, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  4:15 */ {B00001111, B10100000, B01111110, B00000000, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000011, B11111110 },
  /*  4:20 */ {B00001111, B10100000, B01111110, B00000000, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11000000, B00000000 },
  /*  4:25 */ {B00001111, B10100000, B01111110, B00000000, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11100011, B10000000 },
  /*  4:30 */ {B00001111, B10100000, B01111110, B00000000, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000011, B11111100, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  4:35 */ {B00001111, B10100000, B01111110, B00000000, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B11110000, B00000000, B00100011, B10000000 },
  /*  4:40 */ {B00001111, B10100000, B01111110, B00000000, B00000001, B00000000, B00000000, B00000000, B00000000, B01111111, B11000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  4:45 */ {B00001111, B10100000, B00000000, B11100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00001110, B00000000, B00000011, B11111110 },
  /*  4:50 */ {B00001111, B10100000, B01111110, B00000000, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00000000, B00000000 },
  /*  4:55 */ {B00001111, B10100000, B01111110, B00000000, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00100011, B10000000 },
  /*  5:00 */ {B00001111, B10100000, B00000000, B11100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  5:05 */ {B00001111, B10100000, B00000000, B11100000, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B01110000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  5:10 */ {B00001111, B10100000, B00000000, B11100000, B00000001, B00000000, B00111110, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  5:15 */ {B00001111, B10100000, B00000000, B11100000, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000011, B11111110 },
  /*  5:20 */ {B00001111, B10100000, B00000000, B11100000, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11000000, B00000000 },
  /*  5:25 */ {B00001111, B10100000, B00000000, B11100000, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11100011, B10000000 },
  /*  5:30 */ {B00001111, B10100000, B00000000, B11100000, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000011, B11111100, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  5:35 */ {B00001111, B10100000, B00000000, B11100000, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B11110000, B00000000, B00100011, B10000000 },
  /*  5:40 */ {B00001111, B10100000, B00000000, B11100000, B00000001, B00000000, B00000000, B00000000, B00000000, B01111111, B11000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  5:45 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000001, B11100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00001110, B00000000, B00000011, B11111110 },
  /*  5:50 */ {B00001111, B10100000, B00000000, B11100000, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00000000, B00000000 },
  /*  5:55 */ {B00001111, B10100000, B00000000, B11100000, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00100011, B10000000 },
  /*  6:00 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000001, B11100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  6:05 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000001, B11101000, B00000000, B00000000, B00000000, B00000000, B01110000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  6:10 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000001, B11101000, B00000000, B00000000, B00000000, B00000000, B00001111, B10000000, B00000000, B00000000, B00000000, B00000000 },
  /*  6:15 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000001, B11101000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000011, B11111110 },
  /*  6:20 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000001, B11101000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11000000, B00000000 },
  /*  6:25 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000001, B11101000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11100011, B10000000 },
  /*  6:30 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000001, B11101000, B00000000, B00000000, B00000011, B11111100, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  6:35 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000001, B11101000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B11110000, B00000000, B00100011, B10000000 },
  /*  6:40 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000001, B11101000, B00000000, B01111111, B11000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  6:45 */ {B00001111, B10101111, B10000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00001110, B00000000, B00000011, B11111110 },
  /*  6:50 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000001, B11101000, B00000000, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00000000, B00000000 },
  /*  6:55 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000001, B11101000, B00000000, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00100011, B10000000 },
  /*  7:00 */ {B00001111, B10101111, B10000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  7:05 */ {B00001111, B10101111, B10001000, B11100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  7:10 */ {B00001111, B10101111, B10001000, B00000000, B00000000, B00000000, B00111110, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  7:15 */ {B00001111, B10101111, B10001000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000011, B11111110 },
  /*  7:20 */ {B00001111, B10101111, B10001000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11000000, B00000000 },
  /*  7:25 */ {B00001111, B10101111, B10001000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11100011, B10000000 },
  /*  7:30 */ {B00001111, B10101111, B10001000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000011, B11111100, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  7:35 */ {B00001111, B10101111, B10001000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B11110000, B00000000, B00100011, B10000000 },
  /*  7:40 */ {B00001111, B10101111, B10001000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B01111111, B11000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  7:45 */ {B00001111, B10100000, B00000000, B00000000, B11110000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00001110, B00000000, B00000011, B11111110 },
  /*  7:50 */ {B00001111, B10101111, B10001000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00000000, B00000000 },
  /*  7:55 */ {B00001111, B10101111, B10001000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00100011, B10000000 },
  /*  8:00 */ {B00001111, B10100000, B00000000, B00000000, B11110000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  8:05 */ {B00001111, B10100000, B00000000, B00000000, B11110001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B01110000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  8:10 */ {B00001111, B10100000, B00000000, B00000000, B11110001, B00000000, B00111110, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  8:15 */ {B00001111, B10100000, B00000000, B00000000, B11110001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000011, B11111110 },
  /*  8:20 */ {B00001111, B10100000, B00000000, B00000000, B11110001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11000000, B00000000 },
  /*  8:25 */ {B00001111, B10100000, B00000000, B00000000, B11110001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11100011, B10000000 },
  /*  8:30 */ {B00001111, B10100000, B00000000, B00000000, B11110001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000011, B11111100, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  8:35 */ {B00001111, B10100000, B00000000, B00000000, B11110001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B11110000, B00000000, B00100011, B10000000 },
  /*  8:40 */ {B00001111, B10100000, B00000000, B00000000, B11110001, B00000000, B00000000, B00000000, B00000000, B01111111, B11000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  8:45 */ {B00001111, B10100000, B00000000, B00011111, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00001110, B00000000, B00000011, B11111110 },
  /*  8:50 */ {B00001111, B10100000, B00000000, B00000000, B11110001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00000000, B00000000 },
  /*  8:55 */ {B00001111, B10100000, B00000000, B00000000, B11110001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00100011, B10000000 },
  /*  9:00 */ {B00001111, B10100000, B00000000, B00011111, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  9:05 */ {B00001111, B10100000, B00000000, B00011111, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B01110000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  9:10 */ {B00001111, B10100000, B00000000, B00011111, B00000001, B00000000, B00111110, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  9:15 */ {B00001111, B10100000, B00000000, B00011111, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000011, B11111110 },
  /*  9:20 */ {B00001111, B10100000, B00000000, B00011111, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11000000, B00000000 },
  /*  9:25 */ {B00001111, B10100000, B00000000, B00011111, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11100011, B10000000 },
  /*  9:30 */ {B00001111, B10100000, B00000000, B00011111, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000011, B11111100, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  9:35 */ {B00001111, B10100000, B00000000, B00011111, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B11110000, B00000000, B00100011, B10000000 },
  /*  9:40 */ {B00001111, B10100000, B00000000, B00011111, B00000001, B00000000, B00000000, B00000000, B00000000, B01111111, B11000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /*  9:45 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00111110, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00001110, B00000000, B00000011, B11111110 },
  /*  9:50 */ {B00001111, B10100000, B00000000, B00011111, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00000000, B00000000 },
  /*  9:55 */ {B00001111, B10100000, B00000000, B00011111, B00000001, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00100011, B10000000 },
  /* 10:00 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00111110, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /* 10:05 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00111110, B00001000, B00000000, B00000000, B00000000, B00000000, B01110000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /* 10:10 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00111110, B00001000, B00000000, B00000000, B00000000, B00000000, B00001111, B10000000, B00000000, B00000000, B00000000, B00000000 },
  /* 10:15 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00111110, B00001000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000011, B11111110 },
  /* 10:20 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00111110, B00001000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11000000, B00000000 },
  /* 10:25 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00111110, B00001000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11100011, B10000000 },
  /* 10:30 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00111110, B00001000, B00000000, B00000000, B00000011, B11111100, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /* 10:35 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00111110, B00001000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B11110000, B00000000, B00100011, B10000000 },
  /* 10:40 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00111110, B00001000, B00000000, B01111111, B11000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /* 10:45 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B11111100, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00001110, B00000000, B00000011, B11111110 },
  /* 10:50 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00111110, B00001000, B00000000, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00000000, B00000000 },
  /* 10:55 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00111110, B00001000, B00000000, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00100011, B10000000 },
  /* 11:00 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B11111100, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /* 11:05 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B11111101, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B01110000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /* 11:10 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B11111101, B00111110, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /* 11:15 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B11111101, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000011, B11111110 },
  /* 11:20 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B11111101, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11000000, B00000000 },
  /* 11:25 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B11111101, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11100011, B10000000 },
  /* 11:30 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B11111101, B00000000, B00000000, B00000000, B00000000, B00000011, B11111100, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /* 11:35 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B11111101, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B11110000, B00000000, B00100011, B10000000 },
  /* 11:40 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B11111101, B00000000, B00000000, B00000000, B01111111, B11000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /* 11:45 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B11111100, B00000000, B00000000, B00000000, B00000000, B00000000, B00001110, B00000000, B00000011, B11111110 },
  /* 11:50 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B11111101, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00000000, B00000000 },
  /* 11:55 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B11111101, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00100011, B10000000 },
  /* 12:00 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B11111100, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /* 12:05 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B11111101, B00000000, B00000000, B00000000, B01110000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /* 12:10 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B11111101, B00000000, B00000000, B00000000, B00001111, B10000000, B00000000, B00000000, B00000000, B00000000 },
  /* 12:15 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B11111101, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000011, B11111110 },
  /* 12:20 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B11111101, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11000000, B00000000 },
  /* 12:25 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B11111101, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00011111, B11100011, B10000000 },
  /* 12:30 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B11111101, B00000000, B00000011, B11111100, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /* 12:35 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B11111101, B00000000, B00000000, B00000000, B00000000, B00000111, B11110000, B00000000, B00100011, B10000000 },
  /* 12:40 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B11111101, B01111111, B11000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000 },
  /* 12:45 */ {B00001111, B10100000, B00000000, B00000000, B00000111, B10000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000000, B00001110, B00000000, B00000011, B11111110 },
  /* 12:50 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B11111101, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00000000, B00000000 },
  /* 12:55 */ {B00001111, B10100000, B00000000, B00000000, B00000000, B00000000, B00000000, B00000111, B11111101, B00000000, B00000000, B00000000, B01111111, B10000000, B00000000, B00000000, B00100011, B10000000 }
};

#define DATA_PIN 2
#define CLOCK_PIN 3
#define PHOTOCELL_PIN A0
int led = 127;

LPD8806 strip = LPD8806(144, DATA_PIN, CLOCK_PIN);
Process date;                 // process used to get the date
int lastIndex = -1;

void setup() {

  // Start up the LED strip
  strip.begin();
  
  // No surprise, but the Arduino is OK if we got here
  strip.setPixelColor(0, 0, 127, 0); //A Arduino is ok
  strip.show();
  delay(500);

  Bridge.begin();       // Initialize the Bridge
  Console.begin(); 
  Console.println("Starting"); 
  strip.setPixelColor(1, 0, 127, 0); //A Arduino is ok
  strip.show();
  delay(500);  

  waitUntilIPisup();
  strip.setPixelColor(2, 0, 127, 0); //A Arduino is ok
  strip.show();
  delay(500);  

  // Now check the WLAN signal status
  displayWLANSignal();
  strip.setPixelColor(3, 0, 127, 0); //DHCP
  strip.show();
  delay(500);

  if (checkGoogle() == 1) {
    strip.setPixelColor(4, 0, 127, 0); //I Internet connection
  } else {
    strip.setPixelColor(4, 0, 0, 127); //I Internet connection problem
  }
  strip.show();
  delay(500);

  waitUntilNTPisup();
  strip.setPixelColor(5, 0, 127, 0); //N NTP is running
  strip.show();
  delay(500);

  // run an initial date process. Should return:
  // hh:mm
  if (!date.running())  {
    date.begin("date");
    date.addParameter("+%l:%M:%S");
    date.run();
  }
  strip.setPixelColor(6, 0, 127, 0); //N NTP is running
  strip.show();
  delay(500);

  // Use the "E" to show the light in the room in three levels
  int lightlevel = setRGBfromPhotoCell();
  if (lightlevel == 3) {
    strip.setPixelColor(7, 127, 127, 127); //E
  }
  if (lightlevel == 2) {
    strip.setPixelColor(7, 0, 127, 0); //E
  }
  if (lightlevel == 1) {
    strip.setPixelColor(7, 0, 0, 127); //E
  }
  strip.show();
  delay(500);
}

void displayWLANSignal() {
  Process p;
  p.runShellCommand("/usr/bin/clock/wifi");

  // do nothing until the process finishes, so you get the whole output:
  while (p.running());
  int signal = -1;
  // Read command output. runShellCommand() should have passed "Signal: xx&":
  while (p.available()) {
    int result = p.parseInt();          // look for an integer
    int signal = map(result, 0, 100, 0, 6);   // map result from 0-100 range to 0-7

    if (signal == 0) {
      strip.setPixelColor(12, 127, 0, 0);
      strip.setPixelColor(13, 127, 0, 0);
    }
    if (signal > 0) {
      strip.setPixelColor(12, 0, 127, 0);
      strip.setPixelColor(13, 0, 127, 0);
    }
    if (signal > 1) {
      strip.setPixelColor(14, 0, 127, 0);
      strip.setPixelColor(15, 0, 127, 0);
    }
    if (signal > 2) {
      strip.setPixelColor(16, 0, 127, 0);
      strip.setPixelColor(17, 0, 127, 0);
    }
    if (signal > 3) {
      strip.setPixelColor(18, 0, 127, 0);
      strip.setPixelColor(19, 0, 127, 127);
    }
    if (signal > 4) {
      strip.setPixelColor(20, 0, 127, 127);
      strip.setPixelColor(21, 0, 127, 127);
    }
    if (signal > 5) {
      strip.setPixelColor(22, 0, 127, 127);
      strip.setPixelColor(23, 0, 127, 127);
    }
    strip.show();
    if (signal > 0) break;

  }
}

int checkGoogle() {
  Process p;

  p.runShellCommand("/usr/bin/clock/ping");
  // do nothing until the process finishes, so you get the whole output:
  while (p.running());
  // Read command output. runShellCommand() mat have passed some text
  while (p.available()) {
    int retVal = p.parseInt();
    if (retVal == 4) return 1; // All pings OK
    return 0;  // Not Ok
  }

}
// This function checks if we have a valid IP address
void waitUntilIPisup() {
  Process p;
  int retval = 0;
  while (retval == 0) {

    p.runShellCommand("/usr/bin/clock/ip");
    // do nothing until the process finishes, so you get the whole output:
    while (p.running());

    // Read command output. runShellCommand() should have passed a number
    while (p.available()) {
      retval = p.parseInt();          // look for an integer
      if (retval != 0) break;
    }
  }
}

void waitUntilNTPisup() {

  int numpeers = 0;
  while (numpeers < 1) {
    Process p;
    // Check the number of ntp peers that is up and running
    p.runShellCommand("/usr/bin/clock/ntp");

    // do nothing until the process finishes, so you get the whole output:
    while (p.running());

    // Read command output. runShellCommand() should have passed a number
    while (p.available()) {
      numpeers = p.parseInt();          // look for an integer
      if (numpeers > 0) break;
    }
  }
}

void readtime() {
  int hours, minutes;

  if (!date.running())  {
    date.begin("date");
    date.addParameter("+%l:%M:%S");
    date.run();
  }

  while (date.available() > 0) {
    String timeString = date.readString();
    Console.print(timeString);
    // get the substrings for hour, minute second:
    String hourString = timeString.substring(0, 2);
    String minString = timeString.substring(3, 5);
    // String secString = timeString.substring(6, 8);

    hourString.trim();
    minString.trim();
    hours = hourString.toInt();
    minutes = minString.toInt();
  	
  }

  int index = hours*12 + (minutes / 5) - 12;

  if (index != lastIndex) {
    lastIndex = index;
    showtime(index);
  }

}

void showtime(int index) {
  // Clear strip
  clearstrip();
  // Check the photo cell reading
  setRGBfromPhotoCell();

  for (int i = 0; i < strip.numPixels()/8; i++) {
  	uint8_t byt = pgm_read_byte(&boards[index][i]);
  	for (int j = 0; j < 8; j++) {
	  uint8_t color = (byt & (B10000000 >> j)) > 0 ? led : 0;
	  strip.setPixelColor((i * 8) + j, color);
    }
  }
  strip.show();
}

void loop() {
  readtime();
}

void clearstrip() {
  // Clear strip data before start of next effect
  for (int i = 0; i < strip.numPixels(); i++) {
    strip.setPixelColor(i, 0);
  }
}

int setRGBfromPhotoCell() {
  int photocellReading = analogRead(PHOTOCELL_PIN);
  Console.print("photo reading: ");
  Console.println(photocellReading);

  int level = 0;
  if (photocellReading < 650) {
    led = 10;
    level = 1;
  }
  else if (photocellReading >= 650 && photocellReading < 870) {
    led = 63;
    level = 2;
  }
  else {
    led = 127;
    level = 3;
  }

  return level;
}
